PROJECT(dualshock3)
cmake_minimum_required(VERSION 2.8)
include($ENV{FLAIR_ROOT}/flair-dev/cmake-modules/GlobalCmakeFlair.cmake)

if("${CMAKE_SYSTEM_PROCESSOR}" MATCHES "i686" OR "${CMAKE_SYSTEM_PROCESSOR}" MATCHES "i586" OR "${CMAKE_SYSTEM_PROCESSOR}" MATCHES "x86_64")

SET(FLAIR_USE_SENSOR_ACTUATOR TRUE)
include(${FLAIR_USE_FILE})

ADD_DEFINITIONS(-fpermissive)

INCLUDE_DIRECTORIES(
	${FLAIR_INCLUDE_DIR}
	${CMAKE_SOURCE_DIR}/src
)

LINK_DIRECTORIES (
	${FLAIR_LIBRARY_DIR}
)

ADD_EXECUTABLE(${PROJECT_NAME}
	src/DualShock3.cpp
	src/main.cpp
)

TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${FLAIR_LIBRARIES_NRT} bluetooth usb)

INSTALL(
	TARGETS ${PROJECT_NAME}
	RUNTIME DESTINATION $ENV{FLAIR_ROOT}/flair-bin/tools/${ARCH_DIR}
)

SET(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin)

else()
warn("${PROJECT_NAME} will not be built for ${CMAKE_SYSTEM_PROCESSOR} architecture")
endif()
